<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset='utf-8'/>
    <meta content='width=device-width, initial-scale=1' name='viewport'/>

    <title>Minha Loja Online</title> 
    <meta property="og:title" content="Minha Loja Online - Confira o Cat치logo">
    <meta property="og:description" content="Os melhores produtos com os melhores pre칞os. Clique e confira!">
    
    <title id="seo_titulo">Carregando Loja...</title>
    <meta id="seo_descricao" name='description' content='Cat치logo de produtos online.'/>
    
    <link rel="preconnect" href="https://script.google.com">
    <link rel="preconnect" href="https://lh3.googleusercontent.com">
    <link rel="preconnect" href="https://drive.google.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&amp;family=Roboto:wght@300;400;500&amp;display=swap" rel="stylesheet"/>
    <link crossorigin='anonymous' href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css' integrity='sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We' rel='stylesheet'/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link href="css/style.css" rel="stylesheet"/>

    <style>
      body { padding-bottom: 120px; }
      
      @media (max-width: 576px) {
        #btn_carrinho_flutuante { bottom: 20px; right: 20px; }
      }

      .btn-check:checked + .btn-outline-secondary {
          background-color: var(--cor-principal, #0d6efd);
          color: white;
          border-color: var(--cor-principal, #0d6efd);
      }
    </style>
  </head>
  <body>
    
    <nav class='navbar navbar-expand-md navbar-dark fixed-top bg-primary'>
      <div class='container-fluid'>
        <a class='navbar-brand' href='#'>
            <h1 id="logo_site" style="font-size: 1.25rem; margin:0; display:inline; font-weight: bold;">...</h1>
        </a>

        <button aria-controls='navbarCollapse' aria-expanded='false' aria-label='Toggle navigation' class='navbar-toggler' data-bs-target='#navbarCollapse' data-bs-toggle='collapse' type='button'>
          <span class='navbar-toggler-icon'></span>
        </button>
        <div class='collapse navbar-collapse' id='navbarCollapse'>
          <ul class='navbar-nav me-auto mb-2 mb-md-0'>
            <li class='nav-item'><a class='nav-link active' data-bs-target='#modalUsuario' data-bs-toggle='modal' href='#' id='btn_registrarse'>Cadastre-se</a></li>
            <li class='nav-item'><a class='nav-link active' data-bs-target='#modalLogin' data-bs-toggle='modal' href='#' id='btn_login'>Login</a></li>
            <li class='nav-item'><a class='nav-link active' href='#' id='btn_logout'>Sair</a></li>
            <li class='nav-item'><a class='nav-link active' data-bs-target='#modalUsuario' data-bs-toggle='modal' href='#' id='btn_actualizar'>Atualizar Dados</a></li>
            <li class='nav-item dropdown'>
              <a aria-expanded='false' class='nav-link active dropdown-toggle' data-bs-toggle='dropdown' href='#' id='navbarDropdownMenuLink' role='button'>Categorias</a>
              <ul aria-labelledby='navbarDropdownMenuLink' class='dropdown-menu' id='categoria_menu'></ul>
            </li>
          </ul>
          <form class='d-flex'>
            <input aria-label='Buscar Produtos' class='form-control me-2' id='txt_search' placeholder='Buscar...' type='search'/>
            <button class='btn btn-light' onclick='imprimir_produtos("Nome","0");' type='button'>游댌</button>
          </form>
        </div>
      </div>
    </nav>
    
    <main class='container'>
      <div id="btn_carrinho_flutuante" style='position: fixed; right: 10px; bottom: 10px; z-index:9999'>
        <button class='btn btn-danger btn-lg shadow rounded-pill' data-bs-target='#modalCarrito' data-bs-toggle='modal' onclick='$("#div_mensagem_venda").hide();' type='button'>
          游 <span class="d-none d-md-inline">Ver Carrinho</span>
        </button>
        <div class="text-end mt-1">
             <span class="badge bg-primary shadow p-2" style="font-size: 0.9rem;" id='valorTotal'>R$ 0.00</span>
        </div>
        <div class='alert alert-danger' id='alert_carrinho' role='alert'></div>
      </div>
      
      <div class='bg-light p-3 rounded'>
        <div id="loading_skeleton_container" class="text-center mt-5" style="display:none;">
            <div class="spinner-border text-primary mb-3" role="status"></div>
            <h5 class="text-muted">Carregando produtos...</h5>
            <div id="loading_skeleton_boxes" class="row text-start mt-4"></div>
        </div>
        
        <div class='row' id='div_produtos'></div>
      </div>
    </main>

    <div class="modal fade" id="modalProduto" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalTituloProduto">Produto</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <div id="carouselProduto" class="carousel carousel-dark slide" data-bs-ride="carousel">
                        <div class="carousel-inner" id="carouselImagensContainer"></div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselProduto" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselProduto" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>

                <div class="col-md-6">
                    <h4 id="modalPreco" class="text-primary fw-bold mb-3"></h4>
                    
                    <div id="areaVariacoes" class="mb-3" style="display:none;">
                        <h6>Escolha uma op칞칚o:</h6>
                        <div id="listaVariacoes" class="d-flex flex-wrap gap-2"></div>
                    </div>
                    
                    <div id="areaTabelaMedidas" class="mb-3" style="display:none;">
                        <a href="#" class="text-decoration-none" data-bs-toggle="collapse" data-bs-target="#collapseMedidas">
                            游늺 Ver Tabela de Medidas
                        </a>
                        <div class="collapse mt-2" id="collapseMedidas">
                            <img id="imgTabelaMedidas" src="" class="img-fluid border rounded">
                        </div>
                    </div>

                    <div class="d-grid mb-4">
                        <button type="button" class="btn btn-success btn-lg" id="btnAdicionarModal">Adicionar ao Carrinho</button>
                    </div>

                    <div class="card bg-light border-0 mb-3">
                        <div class="card-body p-3">
                            <h6 class="card-title" style="font-size: 0.9rem;">Simular Frete (1 Unidade)</h6>
                            <div class="input-group input-group-sm mb-2">
                                <input type="text" class="form-control" id="inputSimulaCepIndividual" placeholder="CEP" maxlength="9" oninput="mascaraCep(this)">
                                <button class="btn btn-outline-secondary" type="button" id="btnSimularFreteIndividual">OK</button>
                            </div>
                            <div id="resultadoFreteIndividual" class="small text-muted"></div>
                        </div>
                    </div>

                    <h6>Descri칞칚o:</h6>
                    <p id="modalDescricaoTexto" class="text-muted small"></p>
                </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class='modal' id='modalLogin' tabindex='-1'>
      <div class='modal-dialog'>
        <div class='modal-content'>
          <div class='modal-header'><h5 class='modal-title'>Login</h5><button class='btn-close' data-bs-dismiss='modal'></button></div>
          <div class='modal-body'>
            <form id='form-login'>
              <div class='mb-3'><label class='form-label'>E-mail</label><input class='form-control' id='login_email' required type='email' autocomplete="email"/></div>
              <div class='mb-3'><label class='form-label'>Senha</label><input class='form-control' id='login_password' required type='password' autocomplete="current-password"/></div>
              <div class='d-grid'><button class='btn btn-primary' type='submit'>Entrar</button></div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class='modal' id='modalUsuario' tabindex='-1'>
      <div class='modal-dialog'>
        <div class='modal-content'>
          <div class='modal-header'><h5 class='modal-title'>Cadastro</h5><button class='btn-close' data-bs-dismiss='modal'></button></div>
          <div class='modal-body'>
            <form id='form-registro'>
              <div class='row'>
                <div class='mb-3 col-6'><label>Nome</label><input class='form-control' id='nombre' required type='text' autocomplete="given-name"/></div>
                <div class='mb-3 col-6'><label>Sobrenome</label><input class='form-control' id='apellido' required type='text' autocomplete="family-name"/></div>
              </div>
              <div class='mb-3'><label>Documento</label><input class='form-control' id='documento' required type='text' autocomplete="off"/></div>
              <div class='mb-3'><label>E-mail</label><input class='form-control' id='email' required type='email' autocomplete="email"/></div>
              <div class='mb-3'><label>Usu치rio</label><input class='form-control' id='user' required type='text' autocomplete="username"/></div>
              <div class='mb-3'><label>Senha</label><input class='form-control' id='password' required type='password' autocomplete="new-password"/></div>
              <div class='d-grid'><button class='btn btn-primary' type='submit'>Cadastrar</button></div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class='modal fade' id='modalCarrito' tabindex='-1'>
      <div class='modal-dialog modal-lg'>
        <div class='modal-content'>
          <div class='modal-header'>
            <h5 class='modal-title'>Carrinho de Compras</h5>
            <button aria-label='Close' class='btn-close' data-bs-dismiss='modal' type='button'></button>
          </div>
          <div class='modal-body'>
            <div id='div_carrito' class="mb-4"></div>
            
            <div class="card bg-light border-0 mb-3">
                <div class="card-body">
                    <h6 class="card-title fw-bold">Calcular Frete (Pedido Completo)</h6>
                    <div class="row g-2 align-items-center">
                        <div class="col-auto">
                            <input type="text" class="form-control" id="carrinho_cep" placeholder="Digite seu CEP" maxlength="9" onblur="buscarEnderecoSimples(this.value)" oninput="mascaraCep(this)">
                        </div>
                        <div class="col-auto">
                            <button class="btn btn-primary" onclick="calcularFreteCarrinho()">Calcular</button>
                        </div>
                    </div>
                    <div id="carrinho_endereco_resumo" class="small text-muted mt-2"></div>
                    <div id="carrinho_opcoes_frete" class="mt-3"></div>
                </div>
            </div>

            <div class="d-flex justify-content-between mb-2">
                <span>Subtotal:</span>
                <span id="resumo_subtotal" class="fw-bold">R$ 0.00</span>
            </div>
            <div class="d-flex justify-content-between mb-2 text-primary">
                <span>Frete:</span>
                <span id="resumo_frete">R$ 0.00</span>
            </div>
            <h4 class='text-end mt-3 border-top pt-2'>Total Final: <span id='total_carro_final'>R$ 0.00</span></h4>
            
            <div class='alert alert-danger d-none' id='alert_carrito' role='alert'></div>

            <div class='d-grid mt-4'>
              <button class='btn btn-success btn-lg' id='btn_pagar' type='button' disabled onclick="abrirIdentificacao()">
                  Finalizar Compra
              </button>
              <div class="form-text text-center" id="msg_falta_frete">Calcule o frete para continuar.</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" id="modalCheckout" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Dados para Pagamento</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
         
          
<div class="modal-body">
  <form id="form-checkout">
    <h6 class="text-primary mb-3">Quem vai receber?</h6>
    <div class="row mb-3">
        <div class="col-md-6">
            <label class="form-label">CPF</label>
            <input type="text" class="form-control bg-light" id="checkout_cpf" readonly />
        </div>
        <div class="col-md-6">
            <label class="form-label">Telefone</label>
            <input type="text" class="form-control" id="checkout_telefone" required placeholder="(00) 00000-0000" />
        </div>
    </div>

    <h6 class="text-primary mb-3 mt-4">Onde entregar?</h6>
    <div class="row mb-3">
        <div class="col-md-12">
            <label class="form-label">CEP de Entrega</label>
            <div class="input-group">
                <input type="text" class="form-control" id="checkout_cep" placeholder="00000-000" maxlength="9" oninput="mascaraCep(this)">
                <button class="btn btn-outline-primary" type="button" onclick="buscarCepNoCheckout()">Buscar CEP</button>
            </div>
        </div>
    </div>

    <div class="row mb-2">
        <div class="col-md-9">
            <label class="form-label">Rua</label>
            <input type="text" class="form-control" id="checkout_rua" required />
        </div>
        <div class="col-md-3">
            <label class="form-label">N칰mero</label>
            <input type="text" class="form-control" id="checkout_numero" required placeholder="N췈"/>
        </div>
    </div>

    <div class="row mb-2">
        <div class="col-md-5">
            <label class="form-label">Bairro</label>
            <input type="text" class="form-control" id="checkout_bairro" required />
        </div>
        <div class="col-md-5">
            <label class="form-label">Cidade</label>
            <input type="text" class="form-control" id="checkout_cidade" required />
        </div>
        <div class="col-md-2">
            <label class="form-label">UF</label>
            <input type="text" class="form-control" id="checkout_uf" required />
        </div>
    </div>

    <div class="mb-3">
        <label class="form-label">Complemento</label>
        <input type="text" class="form-control" id="checkout_complemento" placeholder="Apto, Bloco, etc"/>
    </div>

    <div id="erro_cep_divergente" class="alert alert-danger mt-3 shadow-sm" style="display:none; font-size: 0.85rem;">
        <div class="d-flex align-items-center">
            <i class="bi bi-exclamation-shield-fill fs-4 me-2"></i>
            <div>
                <strong>Frete Desatualizado!</strong><br>
                O CEP deste endere칞o 칠 diferente do calculado no carrinho.
                <button type="button" class="btn btn-sm btn-dark mt-2 d-block" onclick="corrigirCepDivergente()">
                    Recalcular Frete para este endere칞o
                </button>
            </div>
        </div>
    </div>
  </form>
</div>

              

                      
         <div class="modal-footer justify-content-start">
            <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Voltar</button>
            <button type="button" class="btn btn-success btn-lg" onclick="iniciarPagamentoFinal()">Ir para Pagamento</button>
          </div>
        </div>
      </div>
    </div>
    
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js' defer></script>
    <script crossorigin='anonymous' integrity='sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj' src='https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js' defer></script>
    <script src='https://sdk.mercadopago.com/js/v2' defer></script>
    <script src="js/config.js" defer></script>
    <script src="js/app.js" defer></script>

    <div class="modal fade" id="modalIdentificacao" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content shadow-lg border-0">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Identifica칞칚o do Pedido</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p class="text-muted small">Para concluir seu pedido e garantir a seguran칞a da entrega, precisamos identificar o destinat치rio.</p>
        <div class="mb-3">
          <label class="form-label fw-bold">Informe o CPF do destinat치rio:</label>
          <input type="text" class="form-control form-control-lg" id="cpf_identificacao" placeholder="000.000.000-00">
        </div>
        <div class="form-check mb-4">
          <input class="form-check-input" type="checkbox" id="check_lgpd" checked>
          <label class="form-check-label small" for="check_lgpd">
            Autorizo o uso dos meus dados para processamento deste pedido conforme a LGPD.
          </label>
        </div>
        <div id="resultado_busca_identidade" style="display:none;" class="p-3 bg-light rounded border mb-3">
            <h6 class="mb-2">Registro Encontrado!</h6>
            <div id="resumo_dados_cliente" class="small text-muted mb-3"></div>
            <div class="d-grid gap-2">
                <button class="btn btn-success" onclick="confirmarDadosExistentes()">Sim, usar este endere칞o</button>
                <button class="btn btn-outline-primary" onclick="irParaCheckoutManual()">N칚o, enviar para outro endere칞o</button>
            </div>
        </div>
        <div class="d-grid" id="btn_buscar_identidade_div">
            <button class="btn btn-primary btn-lg" onclick="buscarIdentidade()">Continuar</button>
        </div>
      </div>
    </div>
  </div>
</div>
  </body>
</html>
